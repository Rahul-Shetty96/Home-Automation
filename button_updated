<html>
<head>

    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
	<meta content="utf-8" http-equiv="encoding">
	<title>Control Home</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>


    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"></link>
    <link rel="stylesheet" href="button.css"></link>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script type="text/javascript" src="/webiopi.js"></script>
  
</head>

<body>

   <div id="home" class="row">

		   	<div class="col-md-4">
			   	 <div id="room1">
				   	 BED ROOM 1<br>
				   	  <input type="button" onclick="pass_status(this.id)"  value="ON BULB" id="r1_l">  <br>
			     </div>

			     <div id="room2">
				     STUDY ROOM<br>
				   	  <input type="button" onclick="pass_status(this.id)"  value="ON FAN" id="r2_f">  
				 </div>
		    </div>

		    
		     
		    <div class="col-md-4">
			     <div id="room3">
				     LIVING ROOM<br>
				      
				      <input type="button" onclick="pass_status(this.id)"  value="ON BULB 1" id="r3_1l">  <br>
				      <input type="button" onclick="pass_status(this.id)"  value="ON BULB 2" id="r3_2l">  <br>
				      
			     </div>
			</div>

			<div class="col-md-4">
			     <div id="room4">
				     KITCHEN<br>
				      <input type="button" onclick="pass_status(this.id)"  value="ON FLAME SENSOR" id="r4_t">  <br>
				      <input type="button" onclick="pass_status(this.id)"  value="ON BULB" id="r4_l">  
			     </div>
			     <div id="room5">
				     BED ROOM 2<br>
				     <input type="button" value="ON BULB"  onclick="pass_status(this.id)"  id="r5_l">  <br>
					 <input type="button" value="ON FAN"  onclick="pass_status(this.id)" id="r5_f">
			     </div>
			</div>
	</div>

	<div class="row" id="door-cover">
	<div class="col-md-offset-4 col-md-4" id="door">
	DOOR<br>
	<input type="button" value="ON DOOR" id="d"  onclick="pass_status(this.id)" >  
    <input type="button" value="ON PIR" id="p"  onclick="pass_status(this.id)" >  
	<input type="button" value="ON LIGHT" id="l"  onclick="pass_status(this.id)" >  
	</div>
	</div>

</body>
<script type="text/javascript">
     webiopi().ready(function() {}

	 var stat = {r1_l:0, r2_f:0, r3_1l:0, r3_2l:0, r4_l:0, r4_t:0 ,r5_l:0, r5_f:0, p:0, l:0, d:0};
	 
	 function pass_status(id){
     
     webiopi().callMacro("ONOFF",[id,stat[id]],changetext);

     if(stat[id]==0)
     stat[id] = 1;
     else
     stat[id]=0;
     
     changetext(id);
    }

    var changetext = function (id)
    {
       var o = $("#"+id);
       var l = (o.val()+"").length;
       var s = o.val().substring(o.val().indexOf(" ")+1,l);
       
       if(stat[id]==0)
       o.val("ON "+s);
       else
       o.val("OFF "+s);
    }

</script>
</html>
